# 대수적 데이터 타입


## Unit



## 대수적 데이터 타입

_sum(or), product(and) 타입 등._

oop에서는 추상클래스를 만들고 콘크리트한 하위 클래스들을 구성(중첩된 추상 클래스가 있을 수도 있음, 그러나 인스턴스로 사용하기 위해서는 콘크리트 클래스로 만들어야 함).

그러나 이런 방식은 하위 클래스가 수행해야 할 모든 동작을 상위 인터페이스에 정의해야 하고, 모듈성을 깨지 않고서는 새 연산을 추가하기 힘들다.

```purescript
-- or type
data Shape
  = Circle Point Number
  | Rectangle Point Number Number
  | Line Point Point
  | Text Point String

-- 대수적 타입은 data로 정의되고, 각 하위 타입은 | 로 구분된다.

-- and type
type Point =
  { x :: Number
  , y :: Number
  }

data Maybe a = Nothing | Just a
{-
여기서 forall 이 없음에 주목하라.
forall 은 함수에는 필요하지만 ADT나 type을 다룰 때에는 필요하지 않다.
-}

data List a = Nil | Cons a (List a)

```

여기서 Cons는 다음과 같다.

(콘솔에서 확인했을 때)

```purescript
> :kind Cons
Symbol -> Symbol -> Symbol -> Constraint
```

🤔 주어진 정보가 너무 없다 (감도 안잡힌다)

(pursuit에서 확인했을 때)

```purescript
class Cons (head :: Symbol) (tail :: Symbol) (symbol :: Symbol) | head tail -> symbol, symbol -> head tail
```

[class 에 붙은 | 는 무엇인고 하니](https://book.purescript.org/chapter6.html#:~:text=The%20compiler%20is%20unable%20to%20make%20that%20deduction%20automatically%2C%20and%20cannot%20commit%20to%20the%20streamString%20instance.%20However%2C%20we%20can%20help%20the%20compiler%20by%20adding%20a%20hint%20to%20the%20type%20class%20definition%3A)
_functional dependency_ : 다중 매개변수를 받는 타입 클래스의 인자 타입들의 관계 종속성을 형성하는 것

- 이 타입 생성자의 타입 인자들은 `|` 이후를 만족하는 타입 인자들이 되시겠다.

> 🤔 Cons 는 무엇인가
>
> > 🤔🤔 심볼 타입이란 무엇인가
> >
> > data Symbol :: Type
> > Symbol is the kind of type-level strings.
> >
> > Construct types of this kind using the same literal syntax as documented for strings.
> >
> > ```purescript
> > type Hello :: Symbol
> > type Hello = "Hello, world"
> > ```
> >
> > 🤔🤔🤔🤔🤔
>
> > https://github.com/paf31/24-days-of-purescript-2016/blob/master/9.markdown
> > 리터럴 문자열 `"cookies"` 는 `String` 타입이고, `*` kind 이다.
> > 타입 `"cookies"` 는 `Symbol` kind 이다.
> >
> > 🧐 타입 이름을 의미하는 것?
>
> 🧐 Cons 는 head 타입 이름과 tail 타입 이름과 symbol 타입 이름을 받는데
> head tail의 결과는 symbol 이고
> symbol 은 head tail의 결과이다

즉, List 타입은

- 타입 인자 a 를 받되
- Nil 이거나
  - head List a 가 심볼 이고
  - 심볼이 a 와 List a 인 심볼이다.

head와 tail을 적용할 수 있는 재귀적인 타입.

## ADT 사용하기

ADT의 생성자를 이용하여 타입을 만드는 것은 함수에 인자를 넘기는 것과 다르지 않다.

```purescript
exampleLine :: Shape
exampleLine = Line p1 p2
  where
    p1 :: Point
    p1 = { x: 0.0, y: 0.0 }

    p2 :: Point
    p2 = { x: 100.0, y: 50.0 }
```

이런 ADT를 사용하는 간단한 예제는 패턴 매칭에 적용하는 것

상기한 `Shape`를 `String`으로 변환하는 함수 `showShape`에 대해서

```purescript
showShape :: Shape -> String
showShape (Circle c r) =
  "Circle [center: " <> showPoint c <> ", radius: " <> show r <> "]"
showShape (Rectangle c w h) =
  "Rectangle [center: " <> showPoint c <> ", width: " <> show w <> ", height: " <> show h <> "]"
showShape (Line start end) =
  "Line [start: " <> showPoint start <> ", end: " <> showPoint end <> "]"
showShape (Text loc text) =
  "Text [location: " <> showPoint loc <> ", text: " <> show text <> "]"

showPoint :: Point -> String
showPoint { x, y } =
  "(" <> show x <> ", " <> show y <> ")"
```
